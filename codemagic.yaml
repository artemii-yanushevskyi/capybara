workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: 7d812fe2-8abd-47ca-9d27-3ed7e62d7b6d
        APP_STORE_CONNECT_KEY_IDENTIFIER: 4X5V82JUU5
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmczYW0wYWNLMUFaXzFmVkhBOWFhd1RTbWxGWUhUc3lwek1BV1JlVllrdEdCZk5abU9rUTBwOGZnRnA5Mm1MaklydlY2Nm9vLWcyNmItNktRY1ZlUDYtcjd1NVRUbXNTYU5IQ25ITXNxUmZzcHNYNXp1SExCdFZyeDM3ZjlVSl9LUEMyMzlJVm9xMGUxV19od2t1SVpKMWdhcXJLeHVuZDBuY2ppTEF4NEVyMEJsUTNGdjJsYnJob2F5T1pyT0RPNF9YVWRiN2MxWUpxcHBjdEhBQVdOTksyZURVVHFkeXowMnQxNkZEVDZGY1c1VjFWZ0o4VXlyaDlod2FtbmZtV3hKWl9ybl9LMldPY2tBYnVDSFVWcm1SU1R1OVpkcnRmU0t5aTd0VHdHUGxiTUhpcFoxbnd6RWZSc2ZfUEVNcGl3ZDhUQjM1MFp4ZWM5YTNQQVVFaGNkQzZiYVlfQzNxeUw5UEVoUkhIOG8yZkpxT1BlLS1uZmxZY0FzQlMtaXRNOFUtWlVEcXEyVFdkaHpVYmlqZUFzcUZYTTl4U24zLW9Ja1piVlJjaHFwdUNfcXFVQT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmczYW5ZZzViNDdiY0l5V0ZvMWtHR18yOW1OVmhlTTZjVk8xdmMtUnNBU2VOUEs5Q1c1MGhZSmpmVjgwMGNyX2JiaW4yMnlUTFJHOWlRcXhKM2VZRnRXWk9uZkhNVElKRzN4U2FRRHlzZWxIX1E1cU00alpNNWhuWGhmaDFXc3N6ZFY4S2Y2emxRZjVNbU9LOUEzTU5MMl82QWxLSmQtVklrVkZmcG9LdHdpd3o5WUZvUHBocmd4OXNoSDd6NzE0UWYtcGpaVGw2ZEsyRlZ4M0kzRFpXcnpxb2p2a0VwY21URDFxcFRqNlp6UjdkWDR4NUdDNHVmZ044dDJ1bHR0dTlzQzd6VGJNdUJ1Y2VsVFIwYUQ0V0JReHFiZ003UEJlemxYeE9lbzZGR19vc0FObGw1VUQ0cG10T1pqUy1QVE00UE8zRHlRVXBHcWdCMnVld3BTNnpJNEZmQTF6WFBNMEkyYkpZYnEtOEJfRHFiZnN5dGdlSk1EWFY1amd5S2JqRjRndnRyM2VsbDBIR1g0TnJmVjhYcFpqejBrSG50TmRKZV9MbTNTZXAtZUQ2ODBsdEluWDlWOUdNWUFRSTA0amZCcmtzaEFEVi0zODhYMlNlSGl0T2pVN1pXYzRZY3lFZEF1SFVvSVE0UjBFTGRvQThTOGhWV0hVV2xEWUhrNHlOZkFUc0I3SDR5VVNZakZnb3NlRG1HUnNTaGxTMjdhajBXcGxVTGNHUnJ0SFpFREpRTVloWXQ3S2JDZ3dTT2pBbC0yMVlVOW11TWViUXZnR1lfZTlQNlRDODZocW5ZRzNUWkZDc3J1Q0hmWmFoZTA4M2otd0djSVNlZFNUeGNMVkdXUWtlQzBRcUJCVGwzQlBzWGpSX3IyUklURml0REgyc3ZTRkJ1SUZaa2dBR2IyYWg3cl9hbjd2dmUxOUx4V1k3Q2FJWVFvY2pzTzZHTS1ub0pkaVJoNl9UVXF0LXdmWXozRnBPRkttUFhPMEw3TXE1TWh0RGo5aGlZMFdyMV94ZXhqT2N6M1hIUlp0WlZsVmY5dVhVQ3pZUDBiWjJ6b2tsSDdTdC1XSGRuNnRyeTd4bmNnUWNkOHRqbUNCeGRTWE9vT3VoSk5XMWM4aXBGWUQtMmljMFlUYVVnSmlLSUpGYm9nRWxhcGZPOThkYWJfbk15ZUd6andxVl9QN2VvcHJERWVBNUl6TnI5eHZPTVdFTjdpMjZaMUh4bTAwUHJfRVg1Yi0zOU41MnI5RWxyTUp1ZFlucmNyZWxsZGRvWXhZdUxzcEhzdng2SWhBRGJEQkdOY1NCSUd1VmtBeTdsQXNrSTZZRk5zNDAxMnlETGY0ZmV5QzZ3RDh0bmt4UnBFSDlqbTNQWEd6ZmxRQW1CVUNDQ0ZXc2dzamY2bjU2NE5TVURUQkJYY2c5WkZkU0VfazIwcHRycldVb09FN0RRY0oxYUlkN3RhTGN5NGF0Qk5RWXhMS1lVczdwVDJYY3VZZmZWMjFfR0Z4V0JZQ2VyaktDb3dRdHVEbU9Na3h6ZWQzN0Y0TVJIdVRULXktLVNLckJEQVR4R0RKUEZhRldEcW1qOGFyVUlZRzNpZkhpN3ppV0hmdDd3VW9pQmJOV1ZkQk1WVl8ydWxvN3ZLc1AwTDVoLWt5cHlkTzdUUXB1d3Rrd090OVZEUkQ2WUdReEJRSHJtMUxjVzVGRUlMZ3RFb3UzdEFWNlhQQUFHNWhldnJZc3M4RWh3WS10WlMzY095XzZYai15OW4xNExuNkVXeXp4UXVkZWNiQzdQUUVxUC15U2pVc2pXTzIxeEgtX1ZXbE5nd0ZiWkdwRlpxaGpGXy00SXE5NWVQc0pncTdReExEa0NNVWlGU3Q0VHhIc0lNRWNmOUlNd04wdkJNNi12QU5MQk1udGl1QTIyVVhHQzl2X2ptQzU3M211U2RVXzF1aGNiMGJDYnNHUnIzSkRQa2ZmYi03OHdSQk5BVzRiR0MtQktFcVZTbHJqSlNUZlUzYlZGeFc5OS1uWHBhZGNoWWM4OWJIb05UV2FiN0VJUHBUNnVCRlNPX2U5ZWs4MWt1RTVWMzFkRG55b1JQYUFzQk51QUJ2ZGE4Yl9lMFpwMTNWZmhyT0s4aDNHRGljMlNuOUNGNzAyNjBPMlBNeXJjOWt4eU5wbVhMLVUyOUJuNXB2RW5pRlRLRjdXWWE5Y091R1pFYmlaVzllU0IzWjJ3SVhtLWVqVVJBNDgtYUZfM0tXOTFjeDRha0pFcy1rRm5IUUJVdEN2TXloUEplS1J0LW1oTDZNTW5pQzJXc3UxYUh1ZW9EdWg3cmM1NGNvZDBXTVItSXlLMnVhQXFVU1NUVjhtVllwYVFkNWJuN3d1VzRRSjQzeGpXQVkzbGM4N3NlUW5RS043N3VEVFRyQi1KNWx1VDY2QVVYZEtpekNIQzRtYVpYb3lhM1d6TkZxVUlyamUtaHJsRTh2MlJqY3lsWE0xMHdXbWwtSGd0WGF0UTB4MWZKMWpTQ1IxWVRnbEkyZW1IbXJ1VFY2Z09PRFl3YUpCc1dTczVpMDRFdnkxRHRmbnYxQjBuWHgxa0xhOW13a3VtbWxXNEkwYUZxM2pYcWZpRTgxR2NGYzM2ZUg2VkN1Z3kzS19zN2xsUjVMTTIzOTdVd0xna0Foc0lnNHBrVkszdVZtVHBHSzUtQ2lFV2x2Y3pHUnZxS1M0NVNKa05rbVVxQm1Gdk1UN29TNXN5VWlsWGVpRXAzNE1ReDlaX0FRdDc2cjM1YVVhSjlvc0UwNlMySG9POW5GaG9NWnVmb2pYR19pNjhIQ29Pc3pnRG9WV0F5S3pKaVJuMGc3VDE3R1pKam9Lb0NzSXA3ak0zcldfS3VBRHBuTDNZRWV4eFY2X3lyVXNIajNiNndTa1A0U1U0RjhxbDZXTFBLbHdoVDdCWUE5cWk1UUJoMXVESVhXcWluREw2aDhRMG0tY0wwZjJ4SEpqWEJiUTR4bkZ0bGJNYlpER1IyQXI0X0RqLUJrSE9EZ3JvR2RXU21oZ2dDTU16ZWwyZ00zUUZBa3pSVzEyclNtZXpCS3dyandBdm4wRVE1bjlf)
      flutter: stable
      xcode: 12.5.1
      cocoapods: default
    scripts:
      - flutter packages pub get
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "io.codemagic.capybara" --type IOS_APP_STORE --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --export-options-plist=/Users/builder/export_options.plist
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      app_store_connect:
        api_key: $APP_STORE_CONNECT_PRIVATE_KEY
        key_id: $APP_STORE_CONNECT_KEY_IDENTIFIER
        issuer_id: $APP_STORE_CONNECT_ISSUER_ID
        submit_to_testflight: true
