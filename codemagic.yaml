workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: 7d812fe2-8abd-47ca-9d27-3ed7e62d7b6d
        APP_STORE_CONNECT_KEY_IDENTIFIER: 4X5V82JUU5
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmcyc1hWTVR5Zm9UQTF5Q0hXcGRLZjAwS3lhaEE2aHZDeHBQX0h2b2VYRE9BU2h1UlhqWlhmcFJrNUdkcElTcXpTU3Jad3FrcnJacVJwSlVqQUFwSDJ5cVZSWUtUTVp4cXk3eFFLc3ZaRWp4dXBDZ3VsYUE1X2FoYldSZmx5YVRDMWxJcFZTX01iUkpnbVBMa05IT19QcGkxQ1RZQWhvTGZZOWl6YXBia2xDY2ZsUDhCcE50OEpCVGNZWTcxSVpqbU81Q1lyN1BqMUZhakE2b1c5QlV6aUtLMFJyVjIxYWx2ZWlvTkpZSWVxamlJX1E2TXNZTE5MQk1vXzlLOExsbHEzSzZaOEFjeTR3cWpkTHkzUEJYX0V0b2hXZTVzUVJ0YzBNRl96VXF6SExKOG85THNsUVNvU2hyU1RMNFljeC1SY2pranF2dWdkNW5KV0kxUURHLTU3bVkxLXVWMkV3clo3RTZVUk16WFR5aHpIUDJ6cndMaEEzSjBreFFtU0JMNzRlQWp1Q1BHclVLZ3FINDRoZ3IwTnAtZmlGNEp3MzJYa3R2S1hpYnNNclJRZXZDOD0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmcyc1ZESldqXzlScnhDaEJpc1NXMEZ1OG81eUNxQ2VzS1dOcWp5RVNkOFNHVGliNXM1Tk5ManhLN3huZ0N4TF92QUZrVUlrQnNMek8wM1pLTkNoM1pBRm9GMGZkcThKUzhqZkpiRmQ3U29Wdy1CdkwyeF9OWWUyakhpTzlJWXR6XzdITFZ3VWh3RlhyeGtrUWRnWDFHV3IzNVhodDN2Qi1UdnpWRkdkSUo1d2FwYVNaX3RXMUw2YUtyUlhMcTBGU3dROEhOUy1GSkRXUDItY0RzOVZEb2o1aVdaUkZ5Vi1FbFktbTBzMmJ1emJFMHJYclhYWDk0QU95VzVfTm1CNzdxc2xLNUZnSGZFNWVTdVY0aWRVZ1pFeXk1cVlZeDJmaG9DRlNIdDFZYjRDaHJNZVhCT01Dd0JaUTBfZGpTeTRuM1VPRFM2b2RkdkpxLWlKZERhZmEwbkt4ZGFTX1Fab09wd1NBYUR4dzhEa1ljMGZrSVZWa0dUMmJQOHFHdHRLWEV3Tnp5V0EtQVFjclVBLTRCM29GeFNULTdIOWJkNGtZb21LVUJoaGFaUHl1UHpRMGVocHVXVjJhNk5UWURPaUlWU0JERTJscXlRVHB5aTVfZFRzUnRoZGQzMzJsZmx0M21CU3A1ZklxWW95Y1llZ0l5SVhpMkVpMU9rMXlGaHNFSW9XX1lodVBITExNTkRZX0p0ZjRMSVBzSEJ5cnBkQkF4M0FLcjZCMzRTcm5NX0VWLVllSUlvSkZzNzYyVlRzRXZxU1JPVTkxZGVEZVZWVmp6T3U4cjc5Z3hGVUNXQTVQUi1TMXRzQktNUzUyT0t0eDZIMm5pSFNzcTZCbl91VFlBSnRoa1kzaUxpay00RlFWUHFhREgxalNxY0RLV1FwbGVwTm0wYTJ5ZTZnclRpNHIwSmVCdUhNS19HZV9LU1Y0cnJSakZ5eGF6OVJYNkdKeGNmZnB0YlB2dGF2dkdCX3ptTURfckJMa1pWSTBOaFFMVk01MGo0a01qMGswUE44LTZjSFdUT0JFZlFJSVVocVpsT1ZkNjZDd3ZiNG9OOTl6S0FvT3BUWVZaSUJfRTJ5Z0hYOXpmTGt1Vmg5cGNJSGc2cDZvOS05VEw3VTY5ZFZrZ1l1ZWE3U25DMzlYcV8yMDFBVEJzUjJ4ZDEwTm5HUUp0WU9BekdoYm12alBxWTBzUXFJdXlfd3ZfVWZjNFlXd2pRMUdPVTBOaHYxVi1HUjZsWkZaMTBmTnhvbmUtX1pvQmRDN3Itendqa19zZWlGaUFXem1jaHVaNENOT1hfNVN1TzlPU2VvYTJETnY0UmhMWGdyZTY5aTgxdnk0dEFnZlRld3RlWGFxWlppREF3R2thNmdyV0tXZEk0bkF4SklOMndHaEludUFyUENtZmkyY1BTUlE0OTdTOUdUNkQ4VzFicUVFUGNyUndfRjBGQkVYTERxdXl5M1NRNTUzSXgyaGQ1RmJJeDAzeWZJejkyQkJzTmFPX3BwRGJ2S2VFTHdRcEFCbHB2UVEyZjRkZ0NYamwtajVzamZnUzA0THJxSkI4OTQxS2F2dG9fNEU0Q2M3dkpsOEZmZnZnZGNfYmJXekhsRDE2SmxWVEFrdTMxMnBFRUlTQllOcFkxSVM0eG5La1kxSjZiSlNLbGpFOWxXeXFBMWFyOFRpYk1JcnN1R2lxLWp1T2plWUcxcnFEakxQVDUwb3hYcnNKOE80bU1fRDNWd2c3MnJMYXozamJYdFhUNk8xbE5EWkF3WGwtc1I1MlF1UVA5ZWJ0SVg2d1ZLWjM3NnZjNzdWamxCZ2I0Qk1NU09kRGhpdVFya1lEZ2k1YnR3YkdzenRwNHpDT0FBUW5nODVuRVY4cWdCemFyZXhRa21EcDFyblBnaFpwX003SXM1cTQyOXNYZGxreE0xQVU2Y3V1dElIeEVzSEJfUG9nRmVlbFZ1RnZST19fUGFHc1htZWw3YnNiOTFQUzJUdmJPN05EN1lrTF9OTVBNMzFyVGgzSG9xMXVvZXI3ajRvM280N3UwT0lRelRlcVFfUV9NSTFadHhzVXRuYURPQXk2akN4cDBSUUpNS2R3aDVFNG8yNmtaMzJzaUs2VElqN1htOFhfcC1Lc2laSVdhMDdBYmczdExBbGJqZmtaaXJvYXQ0R0JCcjM4bmtnNUVrTS1HbWU5WTYxcnU1NXZqT2Y0RmRKazVIUW5WUzZfSzRrMEduc2w3NDAybGhTWU1ROTNnOFlYbkVaNmxQZnV5T2ZjQ3JFQjVKRFBuOGNJQUZJYUdjaUtObENTUlgyYTJ1ajE1QlBPWGc2Z0FwUW83X0szbks1MWgxU204T2ptUkpWLWQwMEhvRDJYdHhUYS12Q2ZDcWp5Mnh2czIzQ3RXTXB2NzJ5SVhfUGJiM2NTQXg1QjhxV3N5b08xNWgyakt3LUkxVVI5RlAzMWZtTVpDUHRlanhaLW40eWFYTFRlUEpUOEl3N1ViUHdlVzYya2ZKb1V3TlVVdU1tNHZkNF9PT3RSRk1pUGgzdWthQXg0ZjRsNE9QT2N2ZzNpazY4dkZhMnJYMjJLX28wZzhzRDRxUG1JU2tyRDJEZmkxcDlkejNFTGtTWDVvWXVLaVRKdHIyTXRQS2RkVFJPNFZoUzBZcldXRjF0QzFiZkkxSFNhbS1iT2NtMFp0WGNlMWIzTW85N2xIN0JIMERFUTU5LXEyM2tlXzgwdktDVEt4ZUtfNWpQY0prOGZZTXlSbGs2d29TMWRhb19YbkpjQkhPTVZ1X3V4MjhldVpLNTBpY3VwcU5oZnZNaTBjWGIwTUJ4SFBaYWVwbzk4Q2JBTnJ3cTRJR1pPNElwMFJCckMzY2Q4dmhTX2ZxV1BSUmFxemVzeFBpNTJTRjBJNjE3bDlRNm1UaUROcENLYzlmVUdYTlo2ck8xMGpJTkNzNkYxVlh6YVF0VFVMSlBPSTg0TTV3UVBXUE51U1UwZkhsclN6VXFWOEduTFRla3RTS3Q1Qms4blgycjR4YlFOYTFDV25GdXVNT2V0dVJYWkhIejhvOHFTcjVHLTMxOWhUakVfTDN1S3VYUWxmMXRs)
      flutter: stable
      xcode: 12.5.1
      cocoapods: default
    scripts:
      - flutter packages pub get
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "io.codemagic.capybara" --type IOS_APP_STORE --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --export-options-plist=/Users/builder/export_options.plist
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      app_store_connect:
        api_key: $APP_STORE_CONNECT_PRIVATE_KEY
        key_id: $APP_STORE_CONNECT_KEY_IDENTIFIER
        issuer_id: $APP_STORE_CONNECT_ISSUER_ID
        submit_to_testflight: true
